#!/usr/bin/env python3

from device import bootloader

import sys

def main():
    dev = bootloader.find_device()
    if dev is None:
        sys.exit('No device found')
    with dev:
        dev.reset()
        with bootloader.IntelHexLoader('../firmware/bin/wristwatch.hex') as l:
            pages = bootloader.ProgramPager(l)
            for p in pages:
                dev.program(p)

if __name__ == '__main__':
    main()

